<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="./styles.css">
    <title>Todo App</title>
</head>

<body>
    <input id="todoValue" type="text" placeholder="Write here" value="">
    <input id="todoButton" type="button" value="Submit" onclick="addTodo()">
    <ul></ul>
    <input type="button" value="Clear All" onclick="clearAllTodo()">
    <input type="button" value="Clear Done" onclick="clearAllDone()">
</body>

<script>

var ul = document.querySelector("ul");
function addTodo(){
    var todoValue = document.getElementById("todoValue").value;
    var li = document.createElement("li");
    li.setAttribute('done', 'false');
    li.onclick = todoDone;
    li.innerText = todoValue;
    ul.appendChild(li);
    document.getElementById("todoValue").value = "";
}

function clearAllTodo(){
    ul.innerHTML = "";
}

function clearAllDone(){
    var li = document.getElementsByTagName("LI");
    console.log(li);
    for (var i = li.length-1; i>=0; i--){ 
        //using reverse iteration as if not used, once an element is removed the HTMLCollection (not an array) changes,
        //so if the first and second element are done, only the first element is removed as 
        //iteration moves already to second element and skips the now first element which was the second done element 
        //to begin with. 
        if (li[i].attributes.getNamedItem('done').value === 'done'){
            li[i].parentNode.removeChild(li[i]);
            console.log(`${i} item is removed`)
        }
    }
}

function todoDone(){
    var done = this.attributes.getNamedItem('done').value;
    if (done === "false") {
        this.style.textDecoration = "line-through";
        this.attributes.getNamedItem('done').value = "done";
    } else if (done === "done"){
        this.attributes.getNamedItem('done').value = "false";
        this.style.textDecoration = "";
    }
}
</script>
</html>